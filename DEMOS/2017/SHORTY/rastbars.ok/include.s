GENERATE_RB:
      LEA       courbe_RB,A0
      LEA       buffer_gen_2_RB,A1
      MOVEQ     #0,D1 
      MOVEQ     #0,D2 
      MOVE.W    #$1FF,D0
.put: MOVEQ     #0,D1 
      MOVEQ     #0,D2 
      MOVE.W    (A0)+,D1
      MOVE.W    D1,D2 
      MULS      #130,D1 
      MOVE.L    D1,(A1) 
      MOVE.L    D1,2048(A1) 
      ADDQ.L    #4,A1 
      DBF       D0,.put
      LEA       buffer_gen_1_RB,A0
      MOVEQ     #0,D6 
      MOVE.W    #$F,D7
.loop:LEA       mask_RB,A1
      MOVEM.L   points_RB,D0-D4 
      MOVE.W    (A1)+,D0
      MOVE.W    (A1)+,D1
      MOVE.W    (A1)+,D2
      MOVE.W    (A1)+,D3
      MOVE.W    D0,D4 
      OR.W      D1,D4 
      OR.W      D2,D4 
      OR.W      D3,D4 
      NOT.L     D4
      ROR.L     D6,D0 
      ROR.L     D6,D1 
      ROR.L     D6,D2 
      ROR.L     D6,D3 
      ROR.L     D6,D4 
      MOVE.W    D4,(A0)+
      MOVE.W    D4,(A0)+
      MOVE.W    D0,(A0)+
      MOVE.W    D1,(A0)+
      MOVE.W    D4,(A0)+
      MOVE.W    D4,(A0)+
      MOVE.W    D2,(A0)+
      MOVE.W    D3,(A0)+
      SWAP      D0
      SWAP      D1
      SWAP      D2
      SWAP      D3
      SWAP      D4
      MOVE.W    D4,(A0)+
      MOVE.W    D4,(A0)+
      MOVE.W    D0,(A0)+
      MOVE.W    D1,(A0)+
      MOVE.W    D4,(A0)+
      MOVE.W    D4,(A0)+
      MOVE.W    D2,(A0)+
      MOVE.W    D3,(A0)+
      ADDQ.W    #1,D6 
      DBF       D7,.loop
      RTS 
      
PLAY_RB:
      MOVEA.L   physique,A1
      add.w	#160*71+8*1,a1
      LEA       buffer_display,A0
      MOVEQ     #0,D0 
      move.w	#38-1,d1
.clr: MOVE.L    D0,(A0)+
      dbf	d1,.clr
      MOVE.W    swap1_RB,swap2_RB 
      MOVE.W    #55-1,D7 ; lignes
.loop:LEA       buffer_gen_1_RB,A2
      LEA       buffer_gen_2_RB,A5
      MOVE.W    swap2_RB,D0
      MOVE.L    0(A5,D0.W),D0 
      ADDI.W    #$28,swap2_RB
      MOVE.B    #$B,D1
      ASR.L     D1,D0 
      ADDI.W    #$A0,D0 
      MOVE.W    D0,D1 
      AND.W     #$F,D1
      AND.W     #$FFF0,D0 
      LSR.W     #1,D0 
      ADDA.W    D0,A0 
      LSL.W     #5,D1 
      ADDA.W    D1,A2 
      MOVEM.L   (A0),D0-D3
      AND.L     (A2)+,D0
      OR.L      (A2)+,D0
      AND.L     (A2)+,D1
      OR.L      (A2)+,D1
      AND.L     (A2)+,D2
      OR.L      (A2)+,D2
      AND.L     (A2)+,D3
      OR.L      (A2)+,D3
      MOVEM.L   D0-D3,(A0)
      LEA       buffer_display,A0
      MOVEM.L   48(A0),D0-D5
      MOVEM.L   D0-D5,208(A1) 
      MOVEM.L   72(A0),D0-D5
      MOVEM.L   D0-D5,232(A1) 
      MOVE.L    144(A0),D0
      LEA       160(A1),A1
      DBF       D7,.loop
      ADD.W     #$C,D0
      ADD.W     D0,swap1_RB
      ANDI.W    #$7FC,swap1_RB 
      RTS 
